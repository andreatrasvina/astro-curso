---
import Layout from "../../layouts/Layout.astro";
import { getCollection, render } from "astro:content";

export async function getStaticPaths() {
  const books = await getCollection('books');

  return books.map((book) => ({
    params: { id: book.id.replace(/\.md$/, "") },
    props: { book },
  }));
}

const { book } = Astro.props;
const { id, data } = book;
const { title, author, img, readtime, description, buy } = data;

const slug = id.replace(/\.md$/, "");

//renderizar el contenido del md
const { Content } = await render(book);
---

<Layout title={`${title} - Dev Books`}>

    <div class="grid">
        <aside>
            <a href="/" class=hover:underline"> ← Volver atrás</a>
            <img transition:name={`img-${slug}`} class="portada" src={`/${img}`} alt={title} />
        </aside>

        <main>
            <h1 transition:name={`title-${slug}`} class="titulo">{title}</h1>
            <div class="prose prose-invert ">
                <Content />
            </div>
        </main>

    </div>


</Layout>

<style>
    .grid{
        display: grid;
        grid-template-columns: 25% 75%;
        gap: 30px;
    }

    .portada{
        border-radius: 10px;
        max-width: 100%;
        height: auto;
    }

    .titulo{
        font-weight: bolder;
		font-size: xx-large;
        margin-bottom: 10px;
    }

    .info{
        display: block;
		justify-content: center;
		justify-items: left;
    }

</style>